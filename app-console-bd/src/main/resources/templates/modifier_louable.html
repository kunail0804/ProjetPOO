<!doctype html>
<html lang="fr" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="utf-8" />
  <title>Modifier louable</title>
  <style>
    label { display:inline-block; width: 160px; }
    .row { margin: 6px 0; }
    .box { border:1px solid #ddd; border-radius:10px; padding:12px; max-width: 820px; }
    .muted { color:#666; font-size:0.9em; }
    .err { color:#b00020; }
    .btn { display:inline-block; padding:8px 12px; border:1px solid #ccc; border-radius:8px; text-decoration:none; }
    .btn-primary { font-weight:600; }
  </style>
</head>

<body>

<p><a th:href="@{/louables/{id}(id=${idLouable})}">← Retour au louable</a></p>

<h1>Modifier un louable</h1>

<div class="box" th:if="${erreur}">
  <p class="err" th:text="${erreur}">Erreur</p>
</div>

<div class="box" th:if="${louable == null}">
  <p class="err">Louable introuvable.</p>
</div>

<div th:if="${louable != null}" class="box">

  <p class="muted">
    ID : <strong th:text="${idLouable}">1</strong>
    • Type : <strong th:text="${type}">VOITURE</strong>
  </p>

  <form method="post" th:action="@{/louables/{id}/modifier(id=${idLouable})}">
    <h3>Champs communs</h3>

    <div class="row">
      <label for="prixJour">prixJour:</label>
      <input id="prixJour" name="prixJour" type="number" step="0.01"
             th:value="${louable.prixJour}" required />
    </div>

    <div class="row">
      <label for="statut">statut:</label>
      <select id="statut" name="statut" required>
        <option value="DISPONIBLE" th:selected="${louable.statut != null and louable.statut.name() == 'DISPONIBLE'}">DISPONIBLE</option>
        <option value="INDISPONIBLE" th:selected="${louable.statut != null and louable.statut.name() == 'INDISPONIBLE'}">INDISPONIBLE</option>
        <option value="EN_LOCATION" th:selected="${louable.statut != null and louable.statut.name() == 'EN_LOCATION'}">EN_LOCATION</option>
        <option value="EN_ENTRETIEN" th:selected="${louable.statut != null and louable.statut.name() == 'EN_ENTRETIEN'}">EN_ENTRETIEN</option>
      </select>
    </div>

    <div class="row">
      <label for="lieuPrincipal">lieuPrincipal:</label>
      <input id="lieuPrincipal" name="lieuPrincipal"
             th:value="${louable.lieuPrincipal}" required />
    </div>

    <div class="row"><label for="marque">marque:</label>
      <input id="marque" name="marque" th:value="${louable.marque}" required />
    </div>

    <div class="row"><label for="modele">modele:</label>
      <input id="modele" name="modele" th:value="${louable.modele}" required />
    </div>

    <div class="row"><label for="annee">annee:</label>
      <input id="annee" name="annee" type="number" th:value="${louable.annee}" required />
    </div>

    <div class="row"><label for="couleur">couleur:</label>
      <input id="couleur" name="couleur" th:value="${louable.couleur}" required />
    </div>

    <div class="row"><label for="immatriculation">immatriculation:</label>
      <input id="immatriculation" name="immatriculation" th:value="${louable.immatriculation}" required />
    </div>

    <div class="row"><label for="kilometrage">kilometrage:</label>
      <input id="kilometrage" name="kilometrage" type="number" th:value="${louable.kilometrage}" required />
    </div>

    <h3>Champs spécifiques</h3>

    <!-- VOITURE -->
    <div th:if="${isVoiture}">
      <h4>Voiture</h4>

      <div class="row"><label for="nbPortes">nbPortes:</label>
        <input id="nbPortes" name="nbPortes" type="number" th:value="${louable.nbPortes}" required />
      </div>

      <div class="row"><label for="nbPlaces">nbPlaces:</label>
        <input id="nbPlaces" name="nbPlaces" type="number" th:value="${louable.nbPlaces}" required />
      </div>

      <div class="row"><label for="volumeCoffreLitres">volumeCoffreLitres:</label>
        <input id="volumeCoffreLitres" name="volumeCoffreLitres" type="number" th:value="${louable.volumeCoffreLitres}" required />
      </div>

      <div class="row"><label for="boite">boite:</label>
        <input id="boite" name="boite" th:value="${louable.boite}" placeholder="MANUELLE" required />
      </div>

      <div class="row"><label for="carburant">carburant:</label>
        <input id="carburant" name="carburant" th:value="${louable.carburant}" placeholder="ESSENCE" required />
      </div>

      <div class="row">
        <label for="climatisation">climatisation:</label>
        <select id="climatisation" name="climatisation">
          <option value="">(null)</option>
          <option value="true" th:selected="${louable.climatisation}">true</option>
          <option value="false" th:selected="${!louable.climatisation}">false</option>
        </select>
      </div>
    </div>

    <!-- MOTO -->
    <div th:if="${isMoto}">
      <h4>Moto</h4>

      <div class="row"><label for="cylindreeCc">cylindreeCc:</label>
        <input id="cylindreeCc" name="cylindreeCc" type="number" th:value="${louable.cylindreeCc}" required />
      </div>

      <div class="row"><label for="puissanceCh">puissanceCh:</label>
        <input id="puissanceCh" name="puissanceCh" type="number" th:value="${louable.puissanceCh}" required />
      </div>

      <div class="row"><label for="typeMoto">typeMoto:</label>
        <input id="typeMoto" name="typeMoto" th:value="${louable.typeMoto}" placeholder="ROADSTER" required />
      </div>

      <div class="row"><label for="permisRequisMoto">permisRequis:</label>
        <input id="permisRequisMoto" name="permisRequisMoto" th:value="${louable.permisRequis}" required />
      </div>
    </div>

    <!-- CAMION -->
    <div th:if="${isCamion}">
      <h4>Camion</h4>

      <div class="row"><label for="chargeMaxKg">chargeMaxKg:</label>
        <input id="chargeMaxKg" name="chargeMaxKg" type="number" th:value="${louable.chargeMaxKg}" required />
      </div>

      <div class="row"><label for="volumeUtileM3">volumeUtileM3:</label>
        <input id="volumeUtileM3" name="volumeUtileM3" type="number" step="0.01" th:value="${louable.volumeUtileM3}" required />
      </div>

      <div class="row"><label for="hauteurM">hauteurM:</label>
        <input id="hauteurM" name="hauteurM" type="number" step="0.01" th:value="${louable.hauteurM}" required />
      </div>

      <div class="row"><label for="longueurM">longueurM:</label>
        <input id="longueurM" name="longueurM" type="number" step="0.01" th:value="${louable.longueurM}" required />
      </div>

      <div class="row"><label for="permisRequisCamion">permisRequis:</label>
        <input id="permisRequisCamion" name="permisRequisCamion" th:value="${louable.permisRequis}" required />
      </div>
    </div>

    <div class="row" style="margin-top:14px;">
      <button type="submit" class="btn btn-primary">Enregistrer</button>
      <a class="btn" th:href="@{/louables/{id}(id=${idLouable})}">Annuler</a>
    </div>
  </form>

</div>

</body>
</html>
