<!doctype html>
<html lang="fr" xmlns:th="http://www.thymeleaf.org"
      th:replace="~{fragments/layout :: layout('Modifier louable', ~{::main})}">

<main>
  <div class="panel" style="max-width: 980px; margin: 0 auto;">
    <div class="panel-head">
      <div>
        <h1 class="h1">Modifier un louable</h1>
        <p class="muted small">
          <a class="nav-link" style="display:inline-flex; padding:8px 10px;"
             th:href="@{/louables/{id}(id=${idLouable})}">← Retour au louable</a>
        </p>
      </div>
      <span class="badge cyan" th:text="${type}">TYPE</span>
    </div>

    <div class="spacer"></div>

    <div class="alert err" th:if="${erreur}">
      <span th:text="${erreur}">Erreur</span>
    </div>

    <div class="alert err" th:if="${louable == null}">
      Louable introuvable.
    </div>

    <div th:if="${louable != null}">
      <div class="hr"></div>

      <p class="muted small">
        ID : <strong th:text="${idLouable}">1</strong>
        • Type : <strong th:text="${type}">VOITURE</strong>
      </p>

      <form method="post" th:action="@{/louables/{id}/modifier(id=${idLouable})}" class="form">
        <h2 class="h2">Champs communs</h2>

        <div class="row">
          <div class="col field">
            <label class="label" for="prixJour">Prix / jour</label>
            <input class="input" id="prixJour" name="prixJour" type="number" step="0.01"
                   th:value="${louable.prixJour}" required />
          </div>

          <div class="col field">
            <label class="label" for="statut">Statut</label>
            <select id="statut" name="statut" required>
              <option value="DISPONIBLE" th:selected="${louable.statut != null and louable.statut.name() == 'DISPONIBLE'}">DISPONIBLE</option>
              <option value="INDISPONIBLE" th:selected="${louable.statut != null and louable.statut.name() == 'INDISPONIBLE'}">INDISPONIBLE</option>
              <option value="EN_LOCATION" th:selected="${louable.statut != null and louable.statut.name() == 'EN_LOCATION'}">EN_LOCATION</option>
              <option value="EN_ENTRETIEN" th:selected="${louable.statut != null and louable.statut.name() == 'EN_ENTRETIEN'}">EN_ENTRETIEN</option>
            </select>
          </div>

          <div class="col field">
            <label class="label" for="lieuPrincipal">Lieu principal</label>
            <input class="input" id="lieuPrincipal" name="lieuPrincipal"
                   th:value="${louable.lieuPrincipal}" required />
          </div>
        </div>

        <div class="row">
          <div class="col field"><label class="label" for="marque">Marque</label><input class="input" id="marque" name="marque" th:value="${louable.marque}" required /></div>
          <div class="col field"><label class="label" for="modele">Modèle</label><input class="input" id="modele" name="modele" th:value="${louable.modele}" required /></div>
          <div class="col field"><label class="label" for="annee">Année</label><input class="input" id="annee" name="annee" type="number" th:value="${louable.annee}" required /></div>
        </div>

        <div class="row">
          <div class="col field"><label class="label" for="couleur">Couleur</label><input class="input" id="couleur" name="couleur" th:value="${louable.couleur}" required /></div>
          <div class="col field"><label class="label" for="immatriculation">Immatriculation</label><input class="input" id="immatriculation" name="immatriculation" th:value="${louable.immatriculation}" required /></div>
          <div class="col field"><label class="label" for="kilometrage">Kilométrage</label><input class="input" id="kilometrage" name="kilometrage" type="number" th:value="${louable.kilometrage}" required /></div>
        </div>

        <div class="hr"></div>
        <h2 class="h2">Champs spécifiques</h2>

        <div th:if="${isVoiture}" class="panel soft">
          <span class="badge cyan">Voiture</span>
          <div class="spacer"></div>

          <div class="row">
            <div class="col field"><label class="label" for="nbPortes">Portes</label><input class="input" id="nbPortes" name="nbPortes" type="number" th:value="${louable.nbPortes}" required /></div>
            <div class="col field"><label class="label" for="nbPlaces">Places</label><input class="input" id="nbPlaces" name="nbPlaces" type="number" th:value="${louable.nbPlaces}" required /></div>
            <div class="col field"><label class="label" for="volumeCoffreLitres">Coffre (L)</label><input class="input" id="volumeCoffreLitres" name="volumeCoffreLitres" type="number" th:value="${louable.volumeCoffreLitres}" required /></div>
          </div>

          <div class="row">
            <div class="col field"><label class="label" for="boite">Boîte</label><input class="input" id="boite" name="boite" th:value="${louable.boite}" required /></div>
            <div class="col field"><label class="label" for="carburant">Carburant</label><input class="input" id="carburant" name="carburant" th:value="${louable.carburant}" required /></div>
            <div class="col field">
              <label class="label" for="climatisation">Climatisation</label>
              <select id="climatisation" name="climatisation">
                <option value="">(null)</option>
                <option value="true" th:selected="${louable.climatisation}">true</option>
                <option value="false" th:selected="${!louable.climatisation}">false</option>
              </select>
            </div>
          </div>
        </div>

        <div th:if="${isMoto}" class="panel soft">
          <span class="badge magenta">Moto</span>
          <div class="spacer"></div>

          <div class="row">
            <div class="col field"><label class="label" for="cylindreeCc">Cylindrée (cc)</label><input class="input" id="cylindreeCc" name="cylindreeCc" type="number" th:value="${louable.cylindreeCc}" required /></div>
            <div class="col field"><label class="label" for="puissanceCh">Puissance (ch)</label><input class="input" id="puissanceCh" name="puissanceCh" type="number" th:value="${louable.puissanceCh}" required /></div>
            <div class="col field"><label class="label" for="typeMoto">Type</label><input class="input" id="typeMoto" name="typeMoto" th:value="${louable.typeMoto}" required /></div>
          </div>

          <div class="row">
            <div class="col field"><label class="label" for="permisRequisMoto">Permis requis</label><input class="input" id="permisRequisMoto" name="permisRequisMoto" th:value="${louable.permisRequis}" required /></div>
          </div>
        </div>

        <div th:if="${isCamion}" class="panel soft">
          <span class="badge yellow">Camion</span>
          <div class="spacer"></div>

          <div class="row">
            <div class="col field"><label class="label" for="chargeMaxKg">Charge max (kg)</label><input class="input" id="chargeMaxKg" name="chargeMaxKg" type="number" th:value="${louable.chargeMaxKg}" required /></div>
            <div class="col field"><label class="label" for="volumeUtileM3">Volume (m³)</label><input class="input" id="volumeUtileM3" name="volumeUtileM3" type="number" step="0.01" th:value="${louable.volumeUtileM3}" required /></div>
            <div class="col field"><label class="label" for="hauteurM">Hauteur (m)</label><input class="input" id="hauteurM" name="hauteurM" type="number" step="0.01" th:value="${louable.hauteurM}" required /></div>
          </div>

          <div class="row">
            <div class="col field"><label class="label" for="longueurM">Longueur (m)</label><input class="input" id="longueurM" name="longueurM" type="number" step="0.01" th:value="${louable.longueurM}" required /></div>
            <div class="col field"><label class="label" for="permisRequisCamion">Permis requis</label><input class="input" id="permisRequisCamion" name="permisRequisCamion" th:value="${louable.permisRequis}" required /></div>
          </div>
        </div>

        <div class="btnrow">
          <button class="btn primary" type="submit">Enregistrer</button>
          <a class="btn" th:href="@{/louables/{id}(id=${idLouable})}">Annuler</a>
        </div>
      </form>
    </div>
  </div>
</main>
</html>