<!doctype html>
<html lang="fr" xmlns:th="http://www.thymeleaf.org"
      th:replace="~{fragments/layout :: layout('Édition profil', ~{::main})}">

<main>
  <div class="panel" style="max-width: 980px; margin: 0 auto;">
    <div class="panel-head">
      <div>
        <h1 class="h1">Édition du profil</h1>
        <p class="muted small">Rôle actuel : <strong th:text="${roleActuel}">ROLE</strong></p>
      </div>
      <span class="badge magenta">Edit</span>
    </div>

    <div class="hr"></div>

    <form th:action="@{/profil/edition}" th:object="${form}" method="post" class="form">

      <!-- Identité (Agent/Loueur) -->
      <div th:if="${isAgent || isLoueur}" class="panel soft">
        <span class="badge cyan">Identité</span>
        <div class="spacer"></div>

        <div class="row">
          <div class="col field">
            <label class="label">Prénom</label>
            <input class="input" type="text" th:field="*{prenom}" required>
          </div>
          <div class="col field">
            <label class="label">Nom</label>
            <input class="input" type="text" th:field="*{nom}" required>
          </div>
        </div>
      </div>

      <!-- Identité (EntrepriseEntretien) -->
      <div th:if="${isEntretien}" class="panel soft">
        <span class="badge yellow">Entreprise</span>
        <div class="spacer"></div>

        <div class="row">
          <div class="col field">
            <label class="label">Nom de l’entreprise</label>
            <input class="input" type="text" th:field="*{nomEntreprise}" required>
          </div>
          <div class="col field">
            <label class="label">Raison sociale</label>
            <input class="input" type="text" th:field="*{raisonSoc}">
          </div>
        </div>

        <div class="row">
          <div class="col field">
            <label class="label">N° SIRET</label>
            <input class="input" type="text" th:field="*{noSiret}">
          </div>
        </div>
      </div>

      <!-- Champs communs -->
      <div class="panel soft">
        <span class="badge cyan">Contact</span>
        <div class="spacer"></div>

        <div class="row">
          <div class="col field">
            <label class="label">Email</label>
            <input class="input" type="email" th:field="*{mail}" required>
          </div>
          <div class="col field">
            <label class="label">Téléphone</label>
            <input class="input" type="text" th:field="*{telephone}">
          </div>
        </div>

        <div class="row">
          <div class="col field">
            <label class="label">Adresse</label>
            <input class="input" type="text" th:field="*{adresse}">
          </div>
        </div>

        <div class="row">
          <div class="col field">
            <label class="label">Ville</label>
            <input class="input" type="text" th:field="*{ville}">
          </div>
          <div class="col field">
            <label class="label">Code postal</label>
            <input class="input" type="text" th:field="*{codePostal}">
          </div>
          <div class="col field">
            <label class="label">Région</label>
            <input class="input" type="text" th:field="*{region}">
          </div>
        </div>

        <div class="row">
          <div class="col field">
            <label class="label">Nouveau mot de passe</label>
            <input class="input" type="password" th:field="*{motDePasse}" placeholder="Laisser vide pour ne pas changer">
            <p class="help">Si vide, le mot de passe n’est pas modifié.</p>
          </div>
        </div>
      </div>

      <div class="btnrow">
        <a class="btn" th:href="@{/profil}">Annuler</a>
        <button class="btn primary" type="submit">Enregistrer ✅</button>
      </div>

    </form>
  </div>
</main>
</html>