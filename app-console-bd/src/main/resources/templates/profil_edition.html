<!DOCTYPE html>
<html lang="fr" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <title>Éditer mon profil</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>

<body class="bg-light">

<nav class="navbar navbar-dark bg-primary mb-5">
  <div class="container d-flex justify-content-between align-items-center">
    <span class="navbar-brand mb-0 h1">✏️ Édition du Profil</span>
    <div class="d-flex gap-2">
      <a href="/profil" class="btn btn-outline-light btn-sm">Retour profil</a>
      <a href="/" class="btn btn-outline-light btn-sm">Accueil</a>
    </div>
  </div>
</nav>

<div class="container">
  <div class="row justify-content-center">
    <div class="col-md-8">

      <div class="card shadow">
        <div class="card-header bg-white py-3">
          <h4 class="mb-0 text-primary">Mes informations</h4>
          <div class="text-muted small">
            Rôle actuel : <span th:text="${roleActuel}">ROLE</span>
          </div>
        </div>

        <div class="card-body">
          <form th:action="@{/profil/edition}" th:object="${form}" method="post">

            <div class="text-muted small">
                Rôle actuel : <span th:text="${roleActuel}">ROLE</span>
            </div>

            <!-- Identité (Agent/Loueur) -->
            <div class="row g-3" th:if="${isAgent || isLoueur}">
              <div class="col-md-6">
                <label class="form-label">Prénom</label>
                <input class="form-control" type="text" th:field="*{prenom}" required>
              </div>
              <div class="col-md-6">
                <label class="form-label">Nom</label>
                <input class="form-control" type="text" th:field="*{nom}" required>
              </div>
            </div>

            <!-- Identité (EntrepriseEntretien) -->
            <div class="row g-3" th:if="${isEntretien}">
              <div class="col-md-6">
                <label class="form-label">Nom de l’entreprise</label>
                <input class="form-control" type="text" th:field="*{nomEntreprise}" required>
              </div>
              <div class="col-md-6">
                <label class="form-label">Raison sociale</label>
                <input class="form-control" type="text" th:field="*{raisonSoc}">
              </div>
              <div class="col-md-6">
                <label class="form-label">N° SIRET</label>
                <input class="form-control" type="text" th:field="*{noSiret}">
              </div>
            </div>

            <hr class="my-4">

            <!-- Champs communs -->
            <div class="row g-3">
              <div class="col-md-6">
                <label class="form-label">Email</label>
                <input class="form-control" type="email" th:field="*{mail}" required>
              </div>
              <div class="col-md-6">
                <label class="form-label">Téléphone</label>
                <input class="form-control" type="text" th:field="*{telephone}">
              </div>

              <div class="col-md-12">
                <label class="form-label">Adresse</label>
                <input class="form-control" type="text" th:field="*{adresse}">
              </div>

              <div class="col-md-6">
                <label class="form-label">Ville</label>
                <input class="form-control" type="text" th:field="*{ville}">
              </div>
              <div class="col-md-3">
                <label class="form-label">Code postal</label>
                <input class="form-control" type="text" th:field="*{codePostal}">
              </div>
              <div class="col-md-3">
                <label class="form-label">Région</label>
                <input class="form-control" type="text" th:field="*{region}">
              </div>

              <div class="col-md-6">
                <label class="form-label">Nouveau mot de passe</label>
                <input class="form-control" type="password" th:field="*{motDePasse}" placeholder="Laisser vide pour ne pas changer">
              </div>
            </div>

            <div class="mt-4 d-flex justify-content-between">
              <a href="/profil" class="btn btn-outline-secondary">Annuler</a>
              <button type="submit" class="btn btn-primary">Enregistrer ✅</button>
            </div>

          </form>
        </div>
      </div>

    </div>
  </div>
</div>

</body>
</html>
